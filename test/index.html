<!DOCTYPE html>
<html><head>
	<link type="text/css" rel="stylesheet" href="../jgraduate.css"/>
	<style type="text/css">
		#grad_picker { display: none; }
		.button {
			border: solid 1px darkgrey;
			background-color: white;
			width: 50px; height: 50px;
			cursor: pointer;
		}
	</style>
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"></script>
	<script type="text/javascript" src="../jquery.jgraduate.js"></script>
	<script type="text/javascript">
	$(function() {
		function launchPicker(elem, g) {
			var pos = elem.position();
			$('#gradPicker').css({'left': pos.left, 'top': pos.top}).jGraduate(g, function() {
				// update our global 'grad' variable with the new cloned gradient
				var grad = document.importNode(this.gradient, true);
				grad.id = g.id;
				// replace the old gradient with the new one
				if(g.parentNode) {
					g.parentNode.replaceChild(grad, g);
				}
			});
		}
		
		var svgdoc = new DOMParser().parseFromString(
			'<svg xmlns="http://www.w3.org/2000/svg">\
				<linearGradient id="grad">\
					<stop stop-color="black" offset="0.0"/>\
					<stop stop-color="red" offset="1.0"/>\
				</linearGradient>\
				<rect width="100%" height="100%" fill="url(#grad)"/>\
			</svg>', 'text/xml');

		$('#button1').append( document.importNode(svgdoc.documentElement,true) );
		$('#button1').click(function() { launchPicker($(this), document.getElementById("grad")); });
	});
	</script>
	<title>jGraduate Test Page</title>
</head><body>
	<div id="gradPicker"></div>
	<p>This is a demo of the <a href="http://jgraduate.googlecode.com/">jGraduate jQuery plugin</a>.</p>
	<div id="button1" class="button"></div>	
	<p>Click the box to change the gradient.</p>
</body></html>
